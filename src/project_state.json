{
  "schemaVersion": "1.0.0",
  "projectStateVersion": 11,
  "summary": "Mobile-first delivery web app (PWA) for \"Bikaner Express Delivery\" with Customer, Rider, and Admin roles; app-like Android feel with bottom navigation, colorful branded UI, and smooth animations. Admin now requires a fully functional, separate /admin panel with username/password login, dashboards, order & rider management, delivery proof enforcement, payments/reports (PDF/Excel export), WhatsApp automation, and business settings (rates/branding).",
  "architectural_notes": [
    "Build as a mobile-first PWA with Android install prompt/support (web app manifest + service worker).",
    "Role-based access: Customer, Rider, Admin with separate views/permissions.",
    "Use app-like navigation patterns (bottom nav for primary flows) and branded non-white theme with smooth animations.",
    "Add a mobile-only floating bottom-right \"Install Bikaner Express App\" CTA that triggers the PWA install prompt (beforeinstallprompt) when available; styled with brand/logo color and smooth animation.",
    "Ensure PWA manifest configured for app-like full-screen experience (display: standalone/fullscreen), app name \"Bikaner Express Delivery\", and icons set to company logo.",
    "Provide basic offline access and fast loading via service worker caching strategy; keep push notification capability as a future-ready integration point.",
    "Add a dedicated Admin web app surface at route /admin with an admin-only auth mechanism separate from Customer/Rider flows.",
    "Implement server-side credential authentication for Admin (username/password) with secure session/token handling and backend authorization guarding all /admin APIs.",
    "Enforce business rules in backend: delivery cannot be marked Delivered unless a proof photo is uploaded; store photo metadata including timestamp.",
    "Plan WhatsApp notifications as an integration point (order assigned -> rider, delivered -> customer); define message templates and triggering events in backend."
  ],
  "known_issues": [
    "Authentication strategy mismatch: existing plan uses Internet Identity/role-based access, but Admin now requires username/password login at /admin; requires revisiting overall auth architecture.",
    "User reports admin URL https://bikaner-express.icp0.io/#/admin still results in \"Canister ID Not Resolved\" even when typed correctly; needs verification of routing/deployment/domain/canister configuration (not just client auto-complete).",
    "Deployment/build pipeline encountered a deployment error (needs investigation to successfully deploy the app)."
  ],
  "isFixRequest": false,
  "existing_features": [
    {
      "id": "feature-implement-role-based-authentication-for-three-account-types-customer-rider-and-admin-using-internet-identity-for-login-and-backend-enforced-authorization-for-all-privileged-actions",
      "title": "Implement role-based authentication for three account types: Customer, Rider, and Admin, using Internet Identity for login and backend-enforced authorization for all privileged actions.",
      "reqIds": [
        "REQ-1"
      ],
      "version": 1
    },
    {
      "id": "feature-build-the-customer-ui-bottom-navigation-a-book-delivery-flow-that-captures-pickup-address-and-optional-notes-order-confirmation-order-list-and-order-detail-view-showing-status-and-any-uploaded-photos",
      "title": "Build the Customer UI: bottom-navigation, a 'Book Delivery' flow that captures pickup address (and optional notes), order confirmation, order list, and order detail view showing status and any uploaded photos.",
      "reqIds": [
        "REQ-3"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-customer-parcel-photo-upload-and-rider-delivery-proof-photo-upload-including-frontend-capture-upload-ui-and-backend-storage-retrieval-so-that-admin-can-view-both-photo-types-per-order",
      "title": "Implement Customer parcel photo upload and Rider delivery proof photo upload, including frontend capture/upload UI and backend storage/retrieval so that Admin can view both photo types per order.",
      "reqIds": [
        "REQ-4"
      ],
      "version": 1
    },
    {
      "id": "feature-add-whatsapp-integration-for-customers-provide-a-whatsapp-action-that-opens-whatsapp-or-whatsapp-web-with-a-prefilled-message-containing-the-order-id-and-pickup-address",
      "title": "Add WhatsApp integration for customers: provide a WhatsApp action that opens WhatsApp (or WhatsApp Web) with a prefilled message containing the order ID and pickup address.",
      "reqIds": [
        "REQ-5"
      ],
      "version": 1
    },
    {
      "id": "feature-build-the-rider-ui-show-assigned-orders-list-order-detail-a-navigation-action-that-opens-google-maps-directions-for-the-pickup-address-proof-photo-upload-and-a-mark-delivered-action-that-updates-the-backend-status",
      "title": "Build the Rider UI: show assigned orders list, order detail, a navigation action that opens Google Maps directions for the pickup address, proof photo upload, and a 'Mark Delivered' action that updates the backend status.",
      "reqIds": [
        "REQ-6"
      ],
      "version": 1
    },
    {
      "id": "feature-build-the-admin-panel-ui-dashboard-overview-orders-table-list-with-filters-by-status-order-detail-view-ability-to-assign-a-rider-to-an-order-and-ability-to-track-status-and-view-uploaded-photos",
      "title": "Build the Admin Panel UI: dashboard overview, orders table/list with filters by status, order detail view, ability to assign a rider to an order, and ability to track status and view uploaded photos.",
      "reqIds": [
        "REQ-7"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-a-pwa-install-experience-for-android-users-including-a-web-app-manifest-installable-icons-and-an-in-app-install-app-option-that-appears-when-installation-is-available",
      "title": "Implement a PWA install experience for Android users, including a web app manifest, installable icons, and an in-app 'Install App' option that appears when installation is available.",
      "reqIds": [
        "REQ-8"
      ],
      "version": 1
    },
    {
      "id": "feature-apply-an-app-like-android-inspired-mobile-first-visual-theme-with-smooth-animations-using-a-colorful-branded-palette-no-plain-white-background-and-consistent-design-across-customer-rider-and-admin-areas",
      "title": "Apply an app-like, Android-inspired mobile-first visual theme with smooth animations, using a colorful branded palette (no plain white background) and consistent design across Customer, Rider, and Admin areas.",
      "reqIds": [
        "REQ-9"
      ],
      "version": 1
    },
    {
      "id": "feature-generate-and-include-required-static-brand-pwa-assets-in-the-frontend-public-assets-directory-and-use-them-in-the-ui-and-pwa-manifest-icons-splash-background",
      "title": "Generate and include required static brand/PWA assets in the frontend public assets directory, and use them in the UI and PWA manifest (icons/splash/background).",
      "reqIds": [
        "REQ-10"
      ],
      "version": 1
    },
    {
      "id": "feature-update-the-existing-pwa-install-cta-to-match-the-required-copy-and-styling-change-the-button-label-to-exactly-install-bikaner-express-app-english-use-a-filled-branded-color-style-matching-the-company-logo-primary-color-and-include-a-smooth-attention-animation-on-appearance-interaction-while-preserving-the-existing-install-loading-state",
      "title": "Update the existing PWA install CTA to match the required copy and styling: change the button label to exactly \"Install Bikaner Express App\" (English), use a filled/branded color style (matching the company/logo primary color), and include a smooth attention animation on appearance/interaction while preserving the existing install loading state.",
      "reqIds": [
        "REQ-11"
      ],
      "version": 1
    },
    {
      "id": "feature-render-the-install-cta-as-a-floating-action-button-fab-fixed-to-the-bottom-right-of-the-viewport-across-the-app-not-only-inside-profile-cards-with-appropriate-spacing-above-any-bottom-navigation-safe-area-and-ensure-it-does-not-block-core-interactions",
      "title": "Render the install CTA as a floating action button (FAB) fixed to the bottom-right of the viewport across the app (not only inside profile cards), with appropriate spacing above any bottom navigation/safe-area, and ensure it does not block core interactions.",
      "reqIds": [
        "REQ-12"
      ],
      "version": 1
    },
    {
      "id": "feature-show-the-floating-install-cta-only-on-mobile-devices-and-only-when-the-pwa-is-actually-installable-additionally-restrict-the-cta-to-android-user-agents-do-not-show-on-desktop-or-ios",
      "title": "Show the floating install CTA only on mobile devices and only when the PWA is actually installable; additionally, restrict the CTA to Android user agents (do not show on desktop or iOS).",
      "reqIds": [
        "REQ-13"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-a-separate-admin-authentication-flow-at-url-admin-using-username-password-login-and-gate-all-admin-panel-screens-behind-this-login-so-there-is-no-public-access-to-admin-data-or-actions",
      "title": "Implement a separate Admin authentication flow at URL `/admin` using username + password login, and gate all Admin Panel screens behind this login so there is no public access to admin data or actions.",
      "reqIds": [
        "REQ-15"
      ],
      "version": 1
    },
    {
      "id": "feature-extend-the-data-model-and-backend-apis-to-support-full-order-management-required-by-the-admin-panel-manual-order-creation-by-admin-and-storing-the-additional-order-fields-customer-name-mobile-number-pickup-location-drop-location-parcel-description-payment-type-cash-online-while-preserving-existing-customer-created-order-functionality",
      "title": "Extend the data model and backend APIs to support full Order Management required by the admin panel: manual order creation by admin and storing the additional order fields (Customer Name, Mobile Number, Pickup Location, Drop Location, Parcel Description, Payment Type: Cash/Online) while preserving existing customer-created order functionality.",
      "reqIds": [
        "REQ-17"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-the-admin-controlled-order-status-workflow-with-the-exact-statuses-new-assigned-picked-delivered-allow-status-updates-from-the-admin-ui-and-align-existing-status-values-pending-assigned-pickedup-delivered-to-the-requested-labels-in-the-admin-ui",
      "title": "Implement the admin-controlled order status workflow with the exact statuses: New, Assigned, Picked, Delivered; allow status updates from the Admin UI and align existing status values (`pending/assigned/pickedUp/delivered`) to the requested labels in the Admin UI.",
      "reqIds": [
        "REQ-18"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-a-rider-management-module-in-the-admin-panel-add-edit-and-delete-riders-with-fields-name-phone-number-vehicle-type-bike-and-use-these-rider-records-for-assignment-instead-of-requiring-manual-principal-id-entry",
      "title": "Implement a Rider Management module in the Admin Panel: add, edit, and delete riders with fields Name, Phone Number, Vehicle Type (Bike), and use these rider records for assignment instead of requiring manual Principal ID entry.",
      "reqIds": [
        "REQ-19"
      ],
      "version": 1
    },
    {
      "id": "feature-add-a-track-rider-location-feature-in-the-admin-panel-by-storing-a-rider-provided-google-maps-link-url-in-the-backend-and-rendering-it-as-a-clickable-link-in-admin-rider-details-and-or-order-details",
      "title": "Add a 'Track rider location' feature in the Admin Panel by storing a rider-provided Google Maps link (URL) in the backend and rendering it as a clickable link in Admin rider details and/or order details.",
      "reqIds": [
        "REQ-20"
      ],
      "version": 1
    },
    {
      "id": "feature-enforce-the-delivery-proof-system-end-to-end-require-a-delivery-proof-photo-before-an-order-can-be-marked-delivered-and-record-an-automatic-date-time-timestamp-when-the-proof-photo-is-uploaded-show-the-timestamp-in-the-admin-order-detail-view",
      "title": "Enforce the Delivery Proof System end-to-end: require a delivery proof photo before an order can be marked Delivered, and record an automatic date/time timestamp when the proof photo is uploaded; show the timestamp in the Admin order detail view.",
      "reqIds": [
        "REQ-21"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-admin-dashboard-kpis-required-by-the-business-total-orders-today-this-month-pending-deliveries-completed-deliveries-active-riders-and-total-earnings-daily-monthly",
      "title": "Implement Admin Dashboard KPIs required by the business: Total Orders (Today/This Month), Pending Deliveries, Completed Deliveries, Active Riders, and Total Earnings (Daily/Monthly).",
      "reqIds": [
        "REQ-22"
      ],
      "version": 1
    },
    {
      "id": "feature-add-payments-reports-track-cash-on-delivery-vs-online-for-orders-generate-daily-weekly-monthly-report-views-in-the-admin-panel-and-provide-exports-as-1-excel-compatible-csv-and-2-printable-pdf-via-browser-print-to-pdf",
      "title": "Add Payments & Reports: track Cash on Delivery vs Online for orders, generate Daily/Weekly/Monthly report views in the Admin Panel, and provide exports as (1) Excel-compatible CSV and (2) printable PDF via browser print-to-PDF.",
      "reqIds": [
        "REQ-23"
      ],
      "version": 1
    },
    {
      "id": "feature-add-whatsapp-automation-as-in-app-deep-links-when-an-order-is-assigned-show-an-admin-action-to-open-whatsapp-with-a-prefilled-message-to-the-rider-s-phone-number-when-an-order-is-delivered-show-an-admin-action-to-open-whatsapp-with-a-prefilled-message-to-the-customer-s-mobile-number",
      "title": "Add WhatsApp automation as in-app deep links: when an order is assigned, show an Admin action to open WhatsApp with a prefilled message to the rider’s phone number; when an order is delivered, show an Admin action to open WhatsApp with a prefilled message to the customer’s mobile number.",
      "reqIds": [
        "REQ-24"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-admin-settings-editable-company-name-company-logo-and-contact-numbers-plus-rate-list-management-where-admin-can-edit-rates-at-any-time-and-rates-are-stored-in-the-backend-and-used-for-earnings-calculations",
      "title": "Implement Admin Settings: editable Company Name, Company Logo, and Contact Numbers, plus Rate List Management where admin can edit rates at any time and rates are stored in the backend and used for earnings calculations.",
      "reqIds": [
        "REQ-25"
      ],
      "version": 1
    },
    {
      "id": "feature-ensure-the-admin-panel-ui-is-fully-responsive-for-mobile-and-desktop-uses-the-existing-brand-color-tokens-theme-and-provides-a-clean-professional-admin-layout-navigation-tables-forms-clear-hierarchy-without-breaking-the-existing-customer-and-rider-areas",
      "title": "Ensure the Admin Panel UI is fully responsive for mobile and desktop, uses the existing brand color tokens/theme, and provides a clean, professional admin layout (navigation, tables/forms, clear hierarchy) without breaking the existing Customer and Rider areas.",
      "reqIds": [
        "REQ-26"
      ],
      "version": 1
    },
    {
      "id": "feature-add-an-in-app-user-friendly-way-to-open-the-admin-panel-without-manually-typing-the-url-so-users-can-reliably-reach-the-admin-login-even-when-the-mobile-browser-auto-completes-the-domain-incorrectly",
      "title": "Add an in-app, user-friendly way to open the Admin Panel without manually typing the URL, so users can reliably reach the Admin Login even when the mobile browser auto-completes the domain incorrectly.",
      "reqIds": [
        "REQ-27"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-an-admin-access-help-screen-that-clearly-guides-users-to-the-correct-domain-and-route-when-they-cannot-open-admin-due-to-a-wrong-hostname-e-g-r-express-icp0-io-leading-to-canister-id-not-resolved",
      "title": "Implement an Admin access help screen that clearly guides users to the correct domain and route when they cannot open Admin due to a wrong hostname (e.g., \"r-express.icp0.io\" leading to \"Canister ID Not Resolved\").",
      "reqIds": [
        "REQ-28"
      ],
      "version": 1
    },
    {
      "id": "feature-improve-pwa-service-worker-update-behavior-to-ensure-a-rebuild-new-deployment-is-actually-picked-up-by-installed-users-minimizing-cases-where-users-keep-seeing-an-old-broken-build-from-cache",
      "title": "Improve PWA/service-worker update behavior to ensure a 'rebuild' (new deployment) is actually picked up by installed users, minimizing cases where users keep seeing an old/broken build from cache.",
      "reqIds": [
        "REQ-29"
      ],
      "version": 1
    },
    {
      "id": "feature-update-the-app-s-visual-design-colors-typography-spacing-surfaces-shadows-and-overall-layout-to-closely-match-the-look-and-feel-of-the-reference-website-at-https-bikaner-express-delivery-08l-caffeine-xyz-using-the-uploaded-screenshots-as-additional-visual-guidance",
      "title": "Update the app’s visual design (colors, typography, spacing, surfaces, shadows, and overall layout) to closely match the look-and-feel of the reference website at https://bikaner-express-delivery-08l.caffeine.xyz, using the uploaded screenshots as additional visual guidance.",
      "reqIds": [
        "REQ-30"
      ],
      "version": 1
    },
    {
      "id": "feature-refine-the-mobile-ui-patterns-to-match-the-reference-design-including-bottom-navigation-appearance-height-icon-label-sizing-selected-unselected-states-page-padding-around-content-vs-fixed-nav-and-empty-state-presentation-for-lists-e-g-orders-list-empty-state-card",
      "title": "Refine the mobile UI patterns to match the reference design, including: bottom navigation appearance (height, icon/label sizing, selected/unselected states), page padding around content vs. fixed nav, and empty-state presentation for lists (e.g., orders list empty state card).",
      "reqIds": [
        "REQ-31"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-the-design-updates-primarily-via-shared-theme-tokens-and-reusable-styling-tailwind-config-theme-variables-and-shared-layout-wrappers-avoiding-page-by-page-one-off-styling-where-possible",
      "title": "Implement the design updates primarily via shared theme tokens and reusable styling (Tailwind config/theme variables and shared layout wrappers), avoiding page-by-page one-off styling where possible.",
      "reqIds": [
        "REQ-32"
      ],
      "version": 1
    }
  ],
  "new_feature_requests": [
    {
      "id": "AR-1",
      "summary": "Customer login and account flow",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-2",
      "summary": "Rider login and account flow",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-3",
      "summary": "Admin panel authentication and access control",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-4",
      "summary": "Customer delivery booking (pickup address submission)",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-5",
      "summary": "WhatsApp integration for customer communication",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-6",
      "summary": "Customer parcel photo upload",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-7",
      "summary": "Rider assigned orders list and order detail views",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-8",
      "summary": "Google Maps navigation integration for riders",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-9",
      "summary": "Rider delivery proof photo upload",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-10",
      "summary": "Rider mark order as delivered (status update)",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-11",
      "summary": "Admin dashboard",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-12",
      "summary": "Admin assign riders to orders",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-13",
      "summary": "Admin track order status workflow",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-14",
      "summary": "Admin view uploaded parcel and delivery proof photos",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-15",
      "summary": "Mobile-first app-like UI (bottom navigation, colorful branded theme, no plain white background, smooth animations)",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-16",
      "summary": "PWA installability: \"Install App\" option for Android users",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-18",
      "summary": "Create backend data models and APIs to support deliveries: order creation by customers, assignment to riders by admins, order status progression, and retrieval APIs scoped by role (customer sees their own orders; rider sees assigned orders; admin sees all).",
      "reqIds": [
        "REQ-2"
      ],
      "status": "pending"
    },
    {
      "id": "AR-19",
      "summary": "Android-only in-app PWA install CTA: floating bottom-right \"Install Bikaner Express App\" button (mobile-only) that triggers Add to Home Screen with branded colors and smooth animation; ensure manifest uses app name \"Bikaner Express Delivery\" and company logo icons",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-23",
      "summary": "Ensure the PWA metadata remains aligned with the requested identity: the web app manifest must keep the app name as \"Bikaner Express Delivery\" and the app icon must remain set to the existing company logo image assets referenced by the manifest.",
      "reqIds": [
        "REQ-14"
      ],
      "status": "pending"
    },
    {
      "id": "AR-24",
      "summary": "Separate Admin Panel URL (/admin) with secure username/password login and admin-only access (no public access)",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-25",
      "summary": "Admin Dashboard KPIs: total orders (today/this month), pending/completed deliveries, active riders, total earnings (daily/monthly)",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-26",
      "summary": "Admin Order Management: manually create orders, orders table view, order detail fields (customer name/mobile, pickup/drop, parcel description, payment type), and status workflow (New/Assigned/Picked/Delivered)",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-27",
      "summary": "Admin Rider Management: add/edit/delete riders (name, phone, vehicle type), assign orders to riders, and provide live location tracking via Google Maps link",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-28",
      "summary": "Delivery proof system: require rider delivery photo with automatic date/time stamp; block marking delivered without photo",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-29",
      "summary": "Payments & Reports: track Cash on Delivery, generate daily/weekly/monthly reports, export to PDF and Excel",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-30",
      "summary": "WhatsApp automation: auto message rider when order assigned and auto message customer after delivery",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-31",
      "summary": "Admin Settings: manage company name/logo/contact numbers and rate list management (admin can edit rates anytime)",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-33",
      "summary": "Add backend support for Admin credential management suitable for production usage: store admin credentials securely (no plaintext passwords), allow initialization of at least one admin account, and support login + logout with server-verified sessions.",
      "reqIds": [
        "REQ-16"
      ],
      "status": "pending"
    },
    {
      "id": "AR-34",
      "summary": "Match the app UI/design closely to the reference website (https://bikaner-express-delivery-08l.caffeine.xyz), i.e., replicate a similar look-and-feel in the app.",
      "reqIds": [],
      "status": "pending"
    }
  ],
  "projectName": "Bikaner Express Delivery",
  "clarification_mode": "instant",
  "clarification_rounds": 0
}